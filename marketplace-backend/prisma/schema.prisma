generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            Int            @id @default(autoincrement())
  name          String
  lastName      String         @default("")
  email         String         @unique
  password      String
  role          String
  createdAt     DateTime       @default(now())
  Professional  Professional?  @relation("UserToProfessional")
  Bookings      Booking[]
  Reviews       Review[]
}

model Professional {
  id          Int           @id @default(autoincrement())
  userId      Int           @unique
  description String?
  experience  Int?
  createdAt   DateTime      @default(now())
  User        User          @relation("UserToProfessional", fields: [userId], references: [id])
  Services    Service[]
  Locations   Location?
  Reviews     Review[]
}

model Category {
  id       Int        @id @default(autoincrement())
  name     String
  icon     String?
  Services Service[]
}

model Service {
  id              Int           @id @default(autoincrement())
  professionalId  Int
  categoryId      Int
  title           String
  description     String?
  price           Float
  createdAt       DateTime      @default(now())
  Professional    Professional  @relation(fields: [professionalId], references: [id])
  Category        Category      @relation(fields: [categoryId], references: [id])
  Bookings        Booking[]
}

model Booking {
  id           Int        @id @default(autoincrement())
  userId       Int
  serviceId    Int
  status       String
  bookingDate  DateTime
  createdAt    DateTime   @default(now())
  User         User       @relation(fields: [userId], references: [id])
  Service      Service    @relation(fields: [serviceId], references: [id])
}

model Review {
  id              Int           @id @default(autoincrement())
  userId          Int
  professionalId  Int
  rating          Int           
  comment         String?
  createdAt       DateTime      @default(now())
  User            User          @relation(fields: [userId], references: [id])
  Professional    Professional  @relation(fields: [professionalId], references: [id])
}

model Location {
  id               Int          @id @default(autoincrement())
  professionalId   Int          @unique
  city             String?
  latitude         Float?
  longitude        Float?
  Professional     Professional @relation(fields: [professionalId], references: [id])
}